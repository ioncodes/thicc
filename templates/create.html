<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Thicc</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono&display=swap" rel="stylesheet">
    <style>
        #editor {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
    <script>
        function _post() {
            const code = editor.getValue();
            const language = document.getElementById('language').value;
            const http = new XMLHttpRequest();
            const url = '/create';
            http.open('POST', url, true);
            http.setRequestHeader('Content-type', 'application/json');
            http.onload = function() {
                window.location.replace('{{protocol}}://{{host}}/' + http.responseText);
            };
            http.send(JSON.stringify({
                'code': btoa(escape(code)),
                'language': language
            }));
        }

        function _update() {
            let lang = document.getElementById('language').value;
            editor.session.setMode("ace/mode/" + lang);
        }
    </script>
</head>
<body>
    <form>
        <div class="form-group" style="margin: 15px">
            <div id="editor"></div>
        </div>
        <div class="form-row" style="margin: 15px; position: fixed; bottom: 15px; right: 15px">
            <div class="row">
                <div class="col">
                    <select class="form-control mb-2" id="language" onchange="_update()">
                        <option value="abap">ABAP</option>
                        <option value="abc">ABC</option>
                        <option value="actionscript">ActionScript</option>
                        <option value="ada">Ada</option>
                        <option value="apache_conf">Apache Conf</option>
                        <option value="apex">Apex</option>
                        <option value="applescript">AppleScript</option>
                        <option value="aql">AQL</option>
                        <option value="asciidoc">AsciiDoc</option>
                        <option value="asl">ASL</option>
                        <option value="assembly_x86">Assembly x86</option>
                        <option value="autohotkey">AutoHotkey</option>
                        <option value="batchfile">Batch</option>
                        <option value="bro">Bro</option>
                        <option value="cirru">Cirru</option>
                        <option value="clojure">Clojure</option>
                        <option value="cobol">COBOL</option>
                        <option value="coffee">Coffee</option>
                        <option value="coldfusion">ColdFusion</option>
                        <option value="crystal">Crystal</option>
                        <option value="csharp">C#</option>
                        <option value="css">CSS</option>
                        <option value="curly">Curly</option>
                        <option value="c_cpp">C/C++</option>
                        <option value="d">D</option>
                        <option value="dart">Dart</option>
                        <option value="django">Django</option>
                        <option value="dockerfile">Dockerfile</option>
                        <option value="dot">Dot</option>
                        <option value="eiffel">Eiffel</option>
                        <option value="ejs">EJS</option>
                        <option value="elixir">Elixir</option>
                        <option value="elm">Elm</option>
                        <option value="erlang">Erlang</option>
                        <option value="forth">Forth</option>
                        <option value="fortran">Fortran</option>
                        <option value="fsharp">F#</option>
                        <option value="gitignore">.gitignore</option>
                        <option value="glsl">GLSL</option>
                        <option value="golang">Go</option>
                        <option value="graphqlschema">GraphQL</option>
                        <option value="groovy">Groovy</option>
                        <option value="haml">HAML</option>
                        <option value="handlebars">Handlebars</option>
                        <option value="haskell">Haskell</option>
                        <option value="haskell_cabal">Cabal</option>
                        <option value="haxe">Haxe</option>
                        <option value="hjson">Hjson</option>
                        <option value="html">HTML</option>
                        <option value="html_elixir">HTML + Elixir</option>
                        <option value="html_ruby">HTML + Ruby</option>
                        <option value="ini">INI</option>
                        <option value="jack">Jack</option>
                        <option value="jade">Jade</option>
                        <option value="java">Java</option>
                        <option value="javascript">JavaScript</option>
                        <option value="json">JSON</option>
                        <option value="jsoniq">JSONiq</option>
                        <option value="jsp">JSP</option>
                        <option value="jsx">JSX</option>
                        <option value="julia">Julia</option>
                        <option value="kotlin">Kotlin</option>
                        <option value="latex">LaTeX</option>
                        <option value="less">Less</option>
                        <option value="liquid">Liquid</option>
                        <option value="lisp">Lisp</option>
                        <option value="livescript">LiveScript</option>
                        <option value="lua">Lua</option>
                        <option value="makefile">Makefile</option>
                        <option value="markdown">Markdown</option>
                        <option value="mask">Mask</option>
                        <option value="matlab">Matlab</option>
                        <option value="mysql">MySQL</option>
                        <option value="nginx">Nginx</option>
                        <option value="nim">Nim</option>
                        <option value="nix">Nix</option>
                        <option value="nsis">NSIS</option>
                        <option value="objectivec">Objective-C</option>
                        <option value="ocaml">OCaml</option>
                        <option value="pascal">Pascal</option>
                        <option value="perl">Perl</option>
                        <option value="perl6">Perl 6</option>
                        <option value="pgsql">PostgreSQL</option>
                        <option value="php">PHP</option>
                        <option value="php_laravel_blade">PHP Laravel Blade</option>
                        <option value="pig">Pig</option>
                        <option value="plain_text" selected="selected">Plaintext</option>
                        <option value="powershell">Powershell</option>
                        <option value="properties">Properties</option>
                        <option value="protobuf">Protobuf</option>
                        <option value="puppet">Puppet</option>
                        <option value="python">Python</option>
                        <option value="r">R</option>
                        <option value="razor">Razor</option>
                        <option value="red">Red</option>
                        <option value="redshift">Redshift</option>
                        <option value="ruby">Ruby</option>
                        <option value="rust">Rust</option>
                        <option value="sass">Sass</option>
                        <option value="scala">Scala</option>
                        <option value="scss">SCSS</option>
                        <option value="sh">Shell</option>
                        <option value="sql">SQL</option>
                        <option value="sqlserver">SQL Server</option>
                        <option value="stylus">Stylus</option>
                        <option value="svg">SVG</option>
                        <option value="swift">Swift</option>
                        <option value="tcl">TCL</option>
                        <option value="terraform">Terraform</option>
                        <option value="toml">TOML</option>
                        <option value="tsx">TSX</option>
                        <option value="turtle">Turtle</option>
                        <option value="twig">Twig</option>
                        <option value="typescript">TypeScript</option>
                        <option value="vala">Vala</option>
                        <option value="vbscript">VBS</option>
                        <option value="verilog">Verilog</option>
                        <option value="vhdl">VHDL</option>
                        <option value="xml">XML</option>
                        <option value="yaml">YAML</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <button type="submit" class="btn btn-primary mb-2" onclick="_post()" style="margin-left: 15px">Upload</button>
                </div>
            </div>
        </div>
    </form>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!--<script src="/js/ace.js" type="text/javascript" charset="utf-8"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.5/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor = ace.edit("editor");
        editor.setOptions({
            fontFamily: "'Ubuntu Mono', monospace",
            fontSize: "17pt"
        });
        editor.setShowPrintMargin(false);
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/javascript");
    </script>
</body>
</html>
